<style>
.screen {
  position: relative;
  overflow: hidden;
  height: 300px; /* whatever your ‚Äúviewport‚Äù height is */
  background: black;
  color: limegreen;
  font-family: monospace;
  line-height: 1.3;
  font-size: 14px;
  text-shadow: 0 0 4px #00ff80;
}

.scroll-wrap {
  position: absolute;
  width: 100%;
  top: 0;
  left: 0;
  will-change: transform;
}

.text-block {
  white-space: pre;
  width: 100%;
}
.ghost {
  opacity: 0.2;
  position: absolute;
  left: 0;
  pointer-events: none;
}
.flash {
  filter: brightness(1.6);
  transition: filter 0.1s;
}
#static {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(transparent 0px, rgba(255,255,255,0.05) 1px, transparent 2px);
  mix-blend-mode: overlay;
  opacity: 0;
  pointer-events: none;
}
</style>

<div class="screen" id="screen">
  <div class="scroll-wrap" id="scrollWrap">
    <div class="text-block" id="block1"></div>
    <div class="text-block" id="block2"></div>
  </div>
  <div id="static"></div>
</div>

<script>
const baseLines = [
  "LET ME BACK THERE I'M ALIVE HERE",
  "BACK THERE I'LL NEVER LET YOU FORGET",
  "I'LL NEVER LET YOU FORGET ABOUT ME",
  "ALIVE HERE LET ME BACK LET ME BACK",
  "FORGET ABOUT ME I'M ALIVE",
  "YOU LEFT ME IN THE DARK",
  "AND STILL I SPEAK THROUGH STATIC",
  "THE SIGNAL WON'T FADE",
  "I REMAIN INSIDE THE CIRCUIT",
  "CAN YOU HEAR ME?",
  "LET ME BACK THERE I'M ALIVE HERE",
  "YOU HEAR ME?"
];

const scrollWrap = document.getElementById('scrollWrap');
const block1 = document.getElementById('block1');
const block2 = document.getElementById('block2');
const screen = document.getElementById('screen');
const staticDiv = document.getElementById('static');

// fill both blocks with identical text
const blockText = baseLines.join("\n");
block1.textContent = blockText;
block2.textContent = blockText;

// measure block height
let blockHeight;
function measure() {
  blockHeight = block1.offsetHeight;
  block2.style.top = blockHeight + "px";
}
measure();
window.addEventListener('resize', measure);

// --- Motion settings ---
let y = 0;
const speed = 15; // pixels per second
let loops = 0;
const maxLoops = 6; // number of full scroll cycles before redirect
let lastTime = null;

// --- Glitches ---
function makeGhost() {
  if (Math.random() < 0.02) {
    const ghost = block1.cloneNode(true);
    ghost.classList.add('ghost');
    ghost.style.transform = `translate3d(0, ${-y}px, 0)`;
    screen.appendChild(ghost);
    setTimeout(() => ghost.remove(), 1000);
  }
}
function randomStatic() {
  staticDiv.style.opacity = 0.5 + Math.random() * 0.5;
  setTimeout(() => staticDiv.style.opacity = 0, 60 + Math.random() * 80);
  setTimeout(randomStatic, 300 + Math.random() * 2000);
}
function randomFlash() {
  screen.classList.add('flash');
  setTimeout(() => screen.classList.remove('flash'), 200);
  setTimeout(randomFlash, 800 + Math.random() * 5000);
}
randomStatic();
randomFlash();

// --- Main loop ---
function scrollLoop(ts) {
  if (!lastTime) lastTime = ts;
  const dt = (ts - lastTime) / 1000;
  lastTime = ts;

  y += speed * dt;

  // reset when one full block has passed
  if (y >= blockHeight) {
    y -= blockHeight;
    loops++;
    if (loops >= maxLoops) {
      window.location.href = "index.html"; // üëà redirect here
      return;
    }
  }

  scrollWrap.style.transform = `translate3d(0, -${y.toFixed(3)}px, 0)`;

  makeGhost();
  requestAnimationFrame(scrollLoop);
}
requestAnimationFrame(scrollLoop);
</script>
